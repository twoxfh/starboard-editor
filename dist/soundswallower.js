
var Module = (() => {
  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;
  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;
  return (
function(Module) {
  Module = Module || {};

var Module=typeof Module!="undefined"?Module:{};var readyPromiseResolve,readyPromiseReject;Module["ready"]=new Promise(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram="./this.program";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=typeof window=="object";var ENVIRONMENT_IS_WORKER=typeof importScripts=="function";var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;function logExceptionOnExit(e){if(e instanceof ExitStatus)return;let toLog=e;err("exiting due to exception: "+toLog)}var fs;var nodePath;var requireNodeFS;if(ENVIRONMENT_IS_NODE){if(ENVIRONMENT_IS_WORKER){scriptDirectory=require("path").dirname(scriptDirectory)+"/"}else{scriptDirectory=__dirname+"/"}requireNodeFS=()=>{if(!nodePath){fs=require("fs");nodePath=require("path")}};read_=function shell_read(filename,binary){requireNodeFS();filename=nodePath["normalize"](filename);return fs.readFileSync(filename,binary?undefined:"utf8")};readBinary=filename=>{var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}return ret};readAsync=(filename,onload,onerror)=>{requireNodeFS();filename=nodePath["normalize"](filename);fs.readFile(filename,function(err,data){if(err)onerror(err);else onload(data.buffer)})};if(process["argv"].length>1){thisProgram=process["argv"][1].replace(/\\/g,"/")}arguments_=process["argv"].slice(2);process["on"]("uncaughtException",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process["on"]("unhandledRejection",function(reason){throw reason});quit_=(status,toThrow)=>{if(keepRuntimeAlive()){process["exitCode"]=status;throw toThrow}logExceptionOnExit(toThrow);process["exit"](status)};Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!="undefined"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1)}else{scriptDirectory=""}{read_=url=>{var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.responseType="arraybuffer";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=title=>document.title=title}else{}var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.warn.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module["arguments"])arguments_=Module["arguments"];if(Module["thisProgram"])thisProgram=Module["thisProgram"];if(Module["quit"])quit_=Module["quit"];var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];var noExitRuntime=Module["noExitRuntime"]||true;if(typeof WebAssembly!="object"){abort("no native wasm support detected")}var wasmMemory;var ABORT=false;var EXITSTATUS;function getCFunc(ident){var func=Module["_"+ident];return func}function ccall(ident,returnType,argTypes,args,opts){var toC={"string":function(str){var ret=0;if(str!==null&&str!==undefined&&str!==0){var len=(str.length<<2)+1;ret=stackAlloc(len);stringToUTF8(str,ret,len)}return ret},"array":function(arr){var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType==="string"){return UTF8ToString(ret)}if(returnType==="boolean")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);function onDone(ret){if(stack!==0)stackRestore(stack);return convertReturnValue(ret)}ret=onDone(ret);return ret}var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):undefined;function UTF8ArrayToString(heapOrArray,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}else{var str="";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):""}function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((u&1023)<<10)|str.charCodeAt(++i)&1023;if(u<=127)++len;else if(u<=2047)len+=2;else if(u<=65535)len+=3;else len+=4}return len}function allocateUTF8OnStack(str){var size=lengthBytesUTF8(str)+1;var ret=stackAlloc(size);stringToUTF8Array(str,HEAP8,ret,size);return ret}function writeArrayToMemory(array,buffer){HEAP8.set(array,buffer)}function writeAsciiToMemory(str,buffer,dontAddNull){for(var i=0;i<str.length;++i){HEAP8[buffer++>>0]=str.charCodeAt(i)}if(!dontAddNull)HEAP8[buffer>>0]=0}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module["HEAP8"]=HEAP8=new Int8Array(buf);Module["HEAP16"]=HEAP16=new Int16Array(buf);Module["HEAP32"]=HEAP32=new Int32Array(buf);Module["HEAPU8"]=HEAPU8=new Uint8Array(buf);Module["HEAPU16"]=HEAPU16=new Uint16Array(buf);Module["HEAPU32"]=HEAPU32=new Uint32Array(buf);Module["HEAPF32"]=HEAPF32=new Float32Array(buf);Module["HEAPF64"]=HEAPF64=new Float64Array(buf)}var INITIAL_MEMORY=Module["INITIAL_MEMORY"]||33554432;var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){{if(Module["onAbort"]){Module["onAbort"](what)}}what="Aborted("+what+")";err(what);ABORT=true;EXITSTATUS=1;what+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}function isFileURI(filename){return filename.startsWith("file://")}var wasmBinaryFile;wasmBinaryFile="soundswallower.wasm";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(file){try{if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}else{throw"both async and sync fetching of the wasm failed"}}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile)){return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+wasmBinaryFile+"'"}return response["arrayBuffer"]()}).catch(function(){return getBinary(wasmBinaryFile)})}else{if(readAsync){return new Promise(function(resolve,reject){readAsync(wasmBinaryFile,function(response){resolve(new Uint8Array(response))},reject)})}}}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var info={"a":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module["asm"]=exports;wasmMemory=Module["asm"]["v"];updateGlobalBufferAndViews(wasmMemory.buffer);wasmTable=Module["asm"]["H"];addOnInit(Module["asm"]["w"]);removeRunDependency("wasm-instantiate")}addRunDependency("wasm-instantiate");function receiveInstantiationResult(result){receiveInstance(result["instance"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(function(instance){return instance}).then(receiver,function(reason){err("failed to asynchronously prepare wasm: "+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(wasmBinaryFile)&&!isFileURI(wasmBinaryFile)&&!ENVIRONMENT_IS_NODE&&typeof fetch=="function"){return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiationResult,function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");return instantiateArrayBuffer(receiveInstantiationResult)})})}else{return instantiateArrayBuffer(receiveInstantiationResult)}}if(Module["instantiateWasm"]){try{var exports=Module["instantiateWasm"](info,receiveInstance);return exports}catch(e){err("Module.instantiateWasm callback failed with error: "+e);return false}}instantiateAsync().catch(readyPromiseReject);return{}}function callRuntimeCallbacks(callbacks){while(callbacks.length>0){callbacks.shift()(Module)}}function getValue(ptr,type="i8"){if(type.endsWith("*"))type="*";switch(type){case"i1":return HEAP8[ptr>>0];case"i8":return HEAP8[ptr>>0];case"i16":return HEAP16[ptr>>1];case"i32":return HEAP32[ptr>>2];case"i64":return HEAP32[ptr>>2];case"float":return HEAPF32[ptr>>2];case"double":return HEAPF64[ptr>>3];case"*":return HEAPU32[ptr>>2];default:abort("invalid type for getValue: "+type)}return null}function ___assert_fail(condition,filename,line,func){abort("Assertion failed: "+UTF8ToString(condition)+", at: "+[filename?UTF8ToString(filename):"unknown filename",line,func?UTF8ToString(func):"unknown function"])}var SYSCALLS={varargs:undefined,get:function(){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(ptr){var ret=UTF8ToString(ptr);return ret}};function ___syscall_fcntl64(fd,cmd,varargs){SYSCALLS.varargs=varargs;return 0}function ___syscall_fstat64(fd,buf){}function ___syscall_ioctl(fd,op,varargs){SYSCALLS.varargs=varargs;return 0}function ___syscall_newfstatat(dirfd,path,buf,flags){}function ___syscall_openat(dirfd,path,flags,varargs){SYSCALLS.varargs=varargs}function ___syscall_stat64(path,buf){}function __emscripten_date_now(){return Date.now()}function __emscripten_throw_longjmp(){throw Infinity}function __mmap_js(len,prot,flags,fd,off,allocated){return-52}function __munmap_js(addr,len,prot,flags,fd,offset){}function _abort(){abort("")}function getHeapMax(){return 2147483648}function _emscripten_get_heap_max(){return getHeapMax()}function emscripten_realloc_buffer(size){try{wasmMemory.grow(size-buffer.byteLength+65535>>>16);updateGlobalBufferAndViews(wasmMemory.buffer);return 1}catch(e){}}function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;requestedSize=requestedSize>>>0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}let alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=emscripten_realloc_buffer(newSize);if(replacement){return true}}return false}var ENV={};function getExecutableName(){return thisProgram||"./this.program"}function getEnvStrings(){if(!getEnvStrings.strings){var lang=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8";var env={"USER":"web_user","LOGNAME":"web_user","PATH":"/","PWD":"/","HOME":"/home/web_user","LANG":lang,"_":getExecutableName()};for(var x in ENV){if(ENV[x]===undefined)delete env[x];else env[x]=ENV[x]}var strings=[];for(var x in env){strings.push(x+"="+env[x])}getEnvStrings.strings=strings}return getEnvStrings.strings}function _environ_get(__environ,environ_buf){var bufSize=0;getEnvStrings().forEach(function(string,i){var ptr=environ_buf+bufSize;HEAPU32[__environ+i*4>>2]=ptr;writeAsciiToMemory(string,ptr);bufSize+=string.length+1});return 0}function _environ_sizes_get(penviron_count,penviron_buf_size){var strings=getEnvStrings();HEAPU32[penviron_count>>2]=strings.length;var bufSize=0;strings.forEach(function(string){bufSize+=string.length+1});HEAPU32[penviron_buf_size>>2]=bufSize;return 0}function _exit(status){exit(status)}function _fd_close(fd){return 52}function _fd_read(fd,iov,iovcnt,pnum){return 52}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){return 70}var printCharBuffers=[null,[],[]];function printChar(stream,curr){var buffer=printCharBuffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}}function _fd_write(fd,iov,iovcnt,pnum){var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j])}num+=len}HEAPU32[pnum>>2]=num;return 0}var asmLibraryArg={"a":___assert_fail,"e":___syscall_fcntl64,"u":___syscall_fstat64,"h":___syscall_ioctl,"s":___syscall_newfstatat,"f":___syscall_openat,"t":___syscall_stat64,"i":__emscripten_date_now,"k":__emscripten_throw_longjmp,"o":__mmap_js,"p":__munmap_js,"l":_abort,"n":_emscripten_get_heap_max,"m":_emscripten_resize_heap,"q":_environ_get,"r":_environ_sizes_get,"b":_exit,"c":_fd_close,"g":_fd_read,"j":_fd_seek,"d":_fd_write};var asm=createWasm();var ___wasm_call_ctors=Module["___wasm_call_ctors"]=function(){return(___wasm_call_ctors=Module["___wasm_call_ctors"]=Module["asm"]["w"]).apply(null,arguments)};var _fsg_set_states=Module["_fsg_set_states"]=function(){return(_fsg_set_states=Module["_fsg_set_states"]=Module["asm"]["x"]).apply(null,arguments)};var _cmd_ln_hash_iter=Module["_cmd_ln_hash_iter"]=function(){return(_cmd_ln_hash_iter=Module["_cmd_ln_hash_iter"]=Module["asm"]["y"]).apply(null,arguments)};var _hash_iter_key=Module["_hash_iter_key"]=function(){return(_hash_iter_key=Module["_hash_iter_key"]=Module["asm"]["z"]).apply(null,arguments)};var _set_mdef=Module["_set_mdef"]=function(){return(_set_mdef=Module["_set_mdef"]=Module["asm"]["A"]).apply(null,arguments)};var _set_tmat=Module["_set_tmat"]=function(){return(_set_tmat=Module["_set_tmat"]=Module["asm"]["B"]).apply(null,arguments)};var _load_gmm=Module["_load_gmm"]=function(){return(_load_gmm=Module["_load_gmm"]=Module["asm"]["C"]).apply(null,arguments)};var _ptm_mgau_init_s3file=Module["_ptm_mgau_init_s3file"]=function(){return(_ptm_mgau_init_s3file=Module["_ptm_mgau_init_s3file"]=Module["asm"]["D"]).apply(null,arguments)};var _s3file_rewind=Module["_s3file_rewind"]=function(){return(_s3file_rewind=Module["_s3file_rewind"]=Module["asm"]["E"]).apply(null,arguments)};var _s2_semi_mgau_init_s3file=Module["_s2_semi_mgau_init_s3file"]=function(){return(_s2_semi_mgau_init_s3file=Module["_s2_semi_mgau_init_s3file"]=Module["asm"]["F"]).apply(null,arguments)};var _ms_mgau_init_s3file=Module["_ms_mgau_init_s3file"]=function(){return(_ms_mgau_init_s3file=Module["_ms_mgau_init_s3file"]=Module["asm"]["G"]).apply(null,arguments)};var _cmd_ln_str_r=Module["_cmd_ln_str_r"]=function(){return(_cmd_ln_str_r=Module["_cmd_ln_str_r"]=Module["asm"]["I"]).apply(null,arguments)};var _cmd_ln_float_r=Module["_cmd_ln_float_r"]=function(){return(_cmd_ln_float_r=Module["_cmd_ln_float_r"]=Module["asm"]["J"]).apply(null,arguments)};var _cmd_ln_int_r=Module["_cmd_ln_int_r"]=function(){return(_cmd_ln_int_r=Module["_cmd_ln_int_r"]=Module["asm"]["K"]).apply(null,arguments)};var _cmd_ln_retain=Module["_cmd_ln_retain"]=function(){return(_cmd_ln_retain=Module["_cmd_ln_retain"]=Module["asm"]["L"]).apply(null,arguments)};var _logmath_retain=Module["_logmath_retain"]=function(){return(_logmath_retain=Module["_logmath_retain"]=Module["asm"]["M"]).apply(null,arguments)};var _cmd_ln_free_r=Module["_cmd_ln_free_r"]=function(){return(_cmd_ln_free_r=Module["_cmd_ln_free_r"]=Module["asm"]["N"]).apply(null,arguments)};var _logmath_free=Module["_logmath_free"]=function(){return(_logmath_free=Module["_logmath_free"]=Module["asm"]["O"]).apply(null,arguments)};var _s3file_free=Module["_s3file_free"]=function(){return(_s3file_free=Module["_s3file_free"]=Module["asm"]["P"]).apply(null,arguments)};var _bin_mdef_read_s3file=Module["_bin_mdef_read_s3file"]=function(){return(_bin_mdef_read_s3file=Module["_bin_mdef_read_s3file"]=Module["asm"]["Q"]).apply(null,arguments)};var _malloc=Module["_malloc"]=function(){return(_malloc=Module["_malloc"]=Module["asm"]["R"]).apply(null,arguments)};var _free=Module["_free"]=function(){return(_free=Module["_free"]=Module["asm"]["S"]).apply(null,arguments)};var _cmd_ln_parse_r=Module["_cmd_ln_parse_r"]=function(){return(_cmd_ln_parse_r=Module["_cmd_ln_parse_r"]=Module["asm"]["T"]).apply(null,arguments)};var _cmd_ln_init=Module["_cmd_ln_init"]=function(){return(_cmd_ln_init=Module["_cmd_ln_init"]=Module["asm"]["U"]).apply(null,arguments)};var _cmd_ln_exists_r=Module["_cmd_ln_exists_r"]=function(){return(_cmd_ln_exists_r=Module["_cmd_ln_exists_r"]=Module["asm"]["V"]).apply(null,arguments)};var _cmd_ln_type_r=Module["_cmd_ln_type_r"]=function(){return(_cmd_ln_type_r=Module["_cmd_ln_type_r"]=Module["asm"]["W"]).apply(null,arguments)};var _cmd_ln_set_str_r=Module["_cmd_ln_set_str_r"]=function(){return(_cmd_ln_set_str_r=Module["_cmd_ln_set_str_r"]=Module["asm"]["X"]).apply(null,arguments)};var _cmd_ln_set_int_r=Module["_cmd_ln_set_int_r"]=function(){return(_cmd_ln_set_int_r=Module["_cmd_ln_set_int_r"]=Module["asm"]["Y"]).apply(null,arguments)};var _cmd_ln_set_float_r=Module["_cmd_ln_set_float_r"]=function(){return(_cmd_ln_set_float_r=Module["_cmd_ln_set_float_r"]=Module["asm"]["Z"]).apply(null,arguments)};var _fsg_model_trans_add=Module["_fsg_model_trans_add"]=function(){return(_fsg_model_trans_add=Module["_fsg_model_trans_add"]=Module["asm"]["_"]).apply(null,arguments)};var _fsg_model_tag_trans_add=Module["_fsg_model_tag_trans_add"]=function(){return(_fsg_model_tag_trans_add=Module["_fsg_model_tag_trans_add"]=Module["asm"]["$"]).apply(null,arguments)};var _fsg_model_null_trans_add=Module["_fsg_model_null_trans_add"]=function(){return(_fsg_model_null_trans_add=Module["_fsg_model_null_trans_add"]=Module["asm"]["aa"]).apply(null,arguments)};var _hash_table_iter_next=Module["_hash_table_iter_next"]=function(){return(_hash_table_iter_next=Module["_hash_table_iter_next"]=Module["asm"]["ba"]).apply(null,arguments)};var _fsg_model_word_id=Module["_fsg_model_word_id"]=function(){return(_fsg_model_word_id=Module["_fsg_model_word_id"]=Module["asm"]["ca"]).apply(null,arguments)};var _fsg_model_word_add=Module["_fsg_model_word_add"]=function(){return(_fsg_model_word_add=Module["_fsg_model_word_add"]=Module["asm"]["da"]).apply(null,arguments)};var _logmath_log=Module["_logmath_log"]=function(){return(_logmath_log=Module["_logmath_log"]=Module["asm"]["ea"]).apply(null,arguments)};var _fsg_model_init=Module["_fsg_model_init"]=function(){return(_fsg_model_init=Module["_fsg_model_init"]=Module["asm"]["fa"]).apply(null,arguments)};var _fsg_model_free=Module["_fsg_model_free"]=function(){return(_fsg_model_free=Module["_fsg_model_free"]=Module["asm"]["ga"]).apply(null,arguments)};var _fsg_model_retain=Module["_fsg_model_retain"]=function(){return(_fsg_model_retain=Module["_fsg_model_retain"]=Module["asm"]["ha"]).apply(null,arguments)};var _logmath_exp=Module["_logmath_exp"]=function(){return(_logmath_exp=Module["_logmath_exp"]=Module["asm"]["ia"]).apply(null,arguments)};var _jsgf_grammar_free=Module["_jsgf_grammar_free"]=function(){return(_jsgf_grammar_free=Module["_jsgf_grammar_free"]=Module["asm"]["ja"]).apply(null,arguments)};var _jsgf_get_rule=Module["_jsgf_get_rule"]=function(){return(_jsgf_get_rule=Module["_jsgf_get_rule"]=Module["asm"]["ka"]).apply(null,arguments)};var _jsgf_get_public_rule=Module["_jsgf_get_public_rule"]=function(){return(_jsgf_get_public_rule=Module["_jsgf_get_public_rule"]=Module["asm"]["la"]).apply(null,arguments)};var _jsgf_build_fsg=Module["_jsgf_build_fsg"]=function(){return(_jsgf_build_fsg=Module["_jsgf_build_fsg"]=Module["asm"]["ma"]).apply(null,arguments)};var _jsgf_parse_string=Module["_jsgf_parse_string"]=function(){return(_jsgf_parse_string=Module["_jsgf_parse_string"]=Module["asm"]["na"]).apply(null,arguments)};var _logmath_init=Module["_logmath_init"]=function(){return(_logmath_init=Module["_logmath_init"]=Module["asm"]["oa"]).apply(null,arguments)};var _ps_init_config=Module["_ps_init_config"]=function(){return(_ps_init_config=Module["_ps_init_config"]=Module["asm"]["pa"]).apply(null,arguments)};var _ps_args=Module["_ps_args"]=function(){return(_ps_args=Module["_ps_args"]=Module["asm"]["qa"]).apply(null,arguments)};var _ps_init_cleanup=Module["_ps_init_cleanup"]=function(){return(_ps_init_cleanup=Module["_ps_init_cleanup"]=Module["asm"]["ra"]).apply(null,arguments)};var _ps_init_fe=Module["_ps_init_fe"]=function(){return(_ps_init_fe=Module["_ps_init_fe"]=Module["asm"]["sa"]).apply(null,arguments)};var _ps_init_feat_s3file=Module["_ps_init_feat_s3file"]=function(){return(_ps_init_feat_s3file=Module["_ps_init_feat_s3file"]=Module["asm"]["ta"]).apply(null,arguments)};var _ps_init_acmod_pre=Module["_ps_init_acmod_pre"]=function(){return(_ps_init_acmod_pre=Module["_ps_init_acmod_pre"]=Module["asm"]["ua"]).apply(null,arguments)};var _ps_init_acmod_post=Module["_ps_init_acmod_post"]=function(){return(_ps_init_acmod_post=Module["_ps_init_acmod_post"]=Module["asm"]["va"]).apply(null,arguments)};var _ps_init_dict_s3file=Module["_ps_init_dict_s3file"]=function(){return(_ps_init_dict_s3file=Module["_ps_init_dict_s3file"]=Module["asm"]["wa"]).apply(null,arguments)};var _ps_set_fsg=Module["_ps_set_fsg"]=function(){return(_ps_set_fsg=Module["_ps_set_fsg"]=Module["asm"]["xa"]).apply(null,arguments)};var _ps_init_grammar_s3file=Module["_ps_init_grammar_s3file"]=function(){return(_ps_init_grammar_s3file=Module["_ps_init_grammar_s3file"]=Module["asm"]["ya"]).apply(null,arguments)};var _ps_set_jsgf_string=Module["_ps_set_jsgf_string"]=function(){return(_ps_set_jsgf_string=Module["_ps_set_jsgf_string"]=Module["asm"]["za"]).apply(null,arguments)};var _ps_reinit_fe=Module["_ps_reinit_fe"]=function(){return(_ps_reinit_fe=Module["_ps_reinit_fe"]=Module["asm"]["Aa"]).apply(null,arguments)};var _ps_init=Module["_ps_init"]=function(){return(_ps_init=Module["_ps_init"]=Module["asm"]["Ba"]).apply(null,arguments)};var _ps_retain=Module["_ps_retain"]=function(){return(_ps_retain=Module["_ps_retain"]=Module["asm"]["Ca"]).apply(null,arguments)};var _ps_free=Module["_ps_free"]=function(){return(_ps_free=Module["_ps_free"]=Module["asm"]["Da"]).apply(null,arguments)};var _ps_get_config=Module["_ps_get_config"]=function(){return(_ps_get_config=Module["_ps_get_config"]=Module["asm"]["Ea"]).apply(null,arguments)};var _ps_get_logmath=Module["_ps_get_logmath"]=function(){return(_ps_get_logmath=Module["_ps_get_logmath"]=Module["asm"]["Fa"]).apply(null,arguments)};var _ps_add_word=Module["_ps_add_word"]=function(){return(_ps_add_word=Module["_ps_add_word"]=Module["asm"]["Ga"]).apply(null,arguments)};var _ps_lookup_word=Module["_ps_lookup_word"]=function(){return(_ps_lookup_word=Module["_ps_lookup_word"]=Module["asm"]["Ha"]).apply(null,arguments)};var _ps_start_utt=Module["_ps_start_utt"]=function(){return(_ps_start_utt=Module["_ps_start_utt"]=Module["asm"]["Ia"]).apply(null,arguments)};var _ps_process_float32=Module["_ps_process_float32"]=function(){return(_ps_process_float32=Module["_ps_process_float32"]=Module["asm"]["Ja"]).apply(null,arguments)};var _ps_end_utt=Module["_ps_end_utt"]=function(){return(_ps_end_utt=Module["_ps_end_utt"]=Module["asm"]["Ka"]).apply(null,arguments)};var _ps_get_hyp=Module["_ps_get_hyp"]=function(){return(_ps_get_hyp=Module["_ps_get_hyp"]=Module["asm"]["La"]).apply(null,arguments)};var _ps_seg_iter=Module["_ps_seg_iter"]=function(){return(_ps_seg_iter=Module["_ps_seg_iter"]=Module["asm"]["Ma"]).apply(null,arguments)};var _ps_seg_word=Module["_ps_seg_word"]=function(){return(_ps_seg_word=Module["_ps_seg_word"]=Module["asm"]["Na"]).apply(null,arguments)};var _ps_seg_frames=Module["_ps_seg_frames"]=function(){return(_ps_seg_frames=Module["_ps_seg_frames"]=Module["asm"]["Oa"]).apply(null,arguments)};var _ps_seg_prob=Module["_ps_seg_prob"]=function(){return(_ps_seg_prob=Module["_ps_seg_prob"]=Module["asm"]["Pa"]).apply(null,arguments)};var _ps_seg_next=Module["_ps_seg_next"]=function(){return(_ps_seg_next=Module["_ps_seg_next"]=Module["asm"]["Qa"]).apply(null,arguments)};var _ps_get_prob=Module["_ps_get_prob"]=function(){return(_ps_get_prob=Module["_ps_get_prob"]=Module["asm"]["Ra"]).apply(null,arguments)};var _ps_seg_free=Module["_ps_seg_free"]=function(){return(_ps_seg_free=Module["_ps_seg_free"]=Module["asm"]["Sa"]).apply(null,arguments)};var _s3file_init=Module["_s3file_init"]=function(){return(_s3file_init=Module["_s3file_init"]=Module["asm"]["Ta"]).apply(null,arguments)};var _tmat_init_s3file=Module["_tmat_init_s3file"]=function(){return(_tmat_init_s3file=Module["_tmat_init_s3file"]=Module["asm"]["Ua"]).apply(null,arguments)};var stackSave=Module["stackSave"]=function(){return(stackSave=Module["stackSave"]=Module["asm"]["Va"]).apply(null,arguments)};var stackRestore=Module["stackRestore"]=function(){return(stackRestore=Module["stackRestore"]=Module["asm"]["Wa"]).apply(null,arguments)};var stackAlloc=Module["stackAlloc"]=function(){return(stackAlloc=Module["stackAlloc"]=Module["asm"]["Xa"]).apply(null,arguments)};var calledRun;function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status}dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module["calledRun"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();postRun()}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("")},1);doRun()},1)}else{doRun()}}Module["run"]=run;function exit(status,implicit){EXITSTATUS=status;procExit(status)}function procExit(code){EXITSTATUS=code;if(!keepRuntimeAlive()){if(Module["onExit"])Module["onExit"](code);ABORT=true}quit_(code,new ExitStatus(code))}if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()()}}run();const ARG_INTEGER=1<<1;const ARG_FLOATING=1<<2;const ARG_STRING=1<<3;const ARG_BOOLEAN=1<<4;const DEFAULT_MODEL="en-us";if(typeof Module.defaultModel==="undefined"){Module.defaultModel=DEFAULT_MODEL}if(typeof Module.modelBase==="undefined"){if(ENVIRONMENT_IS_WEB){Module.modelBase="model/"}else{Module.modelBase=require("./model/index.js")}}class Config{constructor(dict){this.cmd_ln=Module._cmd_ln_parse_r(0,Module._ps_args(),0,0,0);if(typeof dict==="undefined"){if(Module.defaultModel!==null)dict={hmm:Module.get_model_path(Module.defaultModel)};else return}else if(Module.defaultModel!==null){if(!("hmm"in dict))dict.hmm=Module.get_model_path(Module.defaultModel)}for(const key in dict){this.set(key,dict[key])}}delete(){if(this.cmd_ln)Module._cmd_ln_free_r(this.cmd_ln);this.cmd_ln=0}normalize_key(key){if(key.length>0){if(key[0]=="_"){return key}else if(key[0]=="-"){const under_key="_"+key.substr(1);if(this.has(under_key))return under_key;else return key}else{const under_key="_"+key;if(this.has(under_key))return under_key;const dash_key="-"+key;if(this.has(dash_key))return dash_key;return key}}else return""}normalize_ckey(ckey){const key=UTF8ToString(ckey);if(key.length==0)return key;else if(key[0]=="-"||key[0]=="_")return key.substr(1);return key}set(key,val){const nkey=this.normalize_key(key);const ckey=allocateUTF8OnStack(nkey);const type=Module._cmd_ln_type_r(this.cmd_ln,ckey);if(type==0){throw new ReferenceError("Unknown cmd_ln parameter "+key)}if(type&ARG_STRING){const cval=allocateUTF8OnStack(val);Module._cmd_ln_set_str_r(this.cmd_ln,ckey,cval)}else if(type&ARG_FLOATING){Module._cmd_ln_set_float_r(this.cmd_ln,ckey,val)}else if(type&(ARG_INTEGER|ARG_BOOLEAN)){Module._cmd_ln_set_int_r(this.cmd_ln,ckey,val)}else{return false}return true}get(key){const ckey=allocateUTF8OnStack(this.normalize_key(key));const type=Module._cmd_ln_type_r(this.cmd_ln,ckey);if(type==0){throw new ReferenceError("Unknown cmd_ln parameter "+key)}if(type&ARG_STRING){const val=Module._cmd_ln_str_r(this.cmd_ln,ckey);if(val==0)return null;return UTF8ToString(val)}else if(type&ARG_FLOATING){return Module._cmd_ln_float_r(this.cmd_ln,ckey)}else if(type&ARG_INTEGER){return Module._cmd_ln_int_r(this.cmd_ln,ckey)}else if(type&ARG_BOOLEAN){return Boolean(Module._cmd_ln_int_r(this.cmd_ln,ckey))}else{throw new TypeError("Unsupported type "+type+" for parameter"+key)}}model_file_path(key,modelfile){const val=this.get(key);if(val!=null)return val;const hmmpath=this.get("hmm");if(hmmpath==null)throw new Error("Could not get "+key+" from config or model directory");return hmmpath+"/"+modelfile}has(key){const ckey=allocateUTF8OnStack(key);return Module._cmd_ln_exists_r(this.cmd_ln,ckey)}*[Symbol.iterator](){let itor=Module._cmd_ln_hash_iter(this.cmd_ln);const seen=new Set;while(itor!=0){const ckey=Module._hash_iter_key(itor);const key=this.normalize_ckey(ckey);if(seen.has(key))continue;seen.add(key);itor=Module._hash_table_iter_next(itor);yield key}}}class Decoder{constructor(config){if(config&&typeof config=="object"&&"cmd_ln"in config)this.config=config;else this.config=new Module.Config(...arguments);this.initialized=false;this.ps=Module._ps_init(0);if(this.ps==0)throw new Error("Failed to construct Decoder")}async initialize(config){if(this.ps==0)throw new Error("Decoder was somehow not constructed (ps==0)");if(config!==undefined){if(this.config)this.config.delete();if(typeof config=="object"&&"cmd_ln"in config)this.config=config;else this.config=new Module.Config(...arguments)}await this.init_config();await this.init_fe();await this.init_feat();await this.init_acmod();await this.load_acmod_files();await this.init_dict();await this.init_grammar();this.initialized=true}async init_config(){await this.init_featparams();let rv=Module._ps_init_config(this.ps,this.config.cmd_ln);if(rv<0)throw new Error("Failed to initialize basic configuration");rv=Module._ps_init_cleanup(this.ps);if(rv<0)throw new Error("Failed to clean up decoder internals")}async init_featparams(){const featparams=this.config.model_file_path("featparams","feat.params");for await(const pair of read_featparams(featparams)){if(this.config.has(pair[0]))this.config.set(pair[0],pair[1])}}async init_fe(){const rv=Module._ps_init_fe(this.ps);if(rv==0)throw new Error("Failed to initialize frontend")}async init_feat(){let rv;try{const lda_path=this.config.model_file_path("lda","feature_transform");const lda=await load_to_s3file(lda_path);rv=Module._ps_init_feat_s3file(this.ps,lda)}catch(e){rv=Module._ps_init_feat_s3file(this.ps,0)}if(rv==0)throw new Error("Failed to initialize feature module")}async init_acmod(){const rv=Module._ps_init_acmod_pre(this.ps);if(rv==0)throw new Error("Failed to initialize acoustic model")}async load_acmod_files(){await this.load_mdef();const tmat=this.config.model_file_path("tmat","transition_matrices");await this.load_tmat(tmat);const means=this.config.model_file_path("mean","means");const variances=this.config.model_file_path("var","variances");const sendump=this.config.model_file_path("sendump","sendump");const mixw=this.config.model_file_path("mixw","mixture_weights");await this.load_gmm(means,variances,sendump,mixw);const rv=Module._ps_init_acmod_post(this.ps);if(rv<0)throw new Error("Failed to initialize acoustic scoring")}async load_mdef(){var mdef_path,s3f;try{mdef_path=this.config.model_file_path("mdef","mdef.bin");s3f=await load_to_s3file(mdef_path)}catch(e){try{mdef_path=this.config.model_file_path("mdef","mdef.txt");s3f=await load_to_s3file(mdef_path)}catch(ee){mdef_path=this.config.model_file_path("mdef","mdef");s3f=await load_to_s3file(mdef_path)}}const mdef=Module._bin_mdef_read_s3file(s3f,this.config.get("cionly"));Module._s3file_free(s3f);if(mdef==0)throw new Error("Failed to read mdef");Module._set_mdef(this.ps,mdef)}async load_tmat(tmat_path){const s3f=await load_to_s3file(tmat_path);const logmath=Module._ps_get_logmath(this.ps);const tpfloor=this.config.get("tmatfloor");const tmat=Module._tmat_init_s3file(s3f,logmath,tpfloor);Module._s3file_free(s3f);if(tmat==0)throw new Error("Failed to read tmat");Module._set_tmat(this.ps,tmat)}async load_gmm(means_path,variances_path,sendump_path,mixw_path){const means=await load_to_s3file(means_path);const variances=await load_to_s3file(variances_path);var sendump,mixw;try{sendump=await load_to_s3file(sendump_path);mixw=0}catch(e){sendump=0;mixw=await load_to_s3file(mixw_path)}if(Module._load_gmm(this.ps,means,variances,mixw,sendump)<0)throw new Error("Failed to load GMM parameters")}async init_dict(){const dict_path=this.config.model_file_path("dict","dict.txt");const dict=await load_to_s3file(dict_path);let fdict;try{const fdict_path=this.config.model_file_path("fdict","noisedict");fdict=await load_to_s3file(fdict_path)}catch(e){fdict=0}const rv=Module._ps_init_dict_s3file(this.ps,dict,fdict);if(rv==0)throw new Error("Failed to initialize dictionaries")}async init_grammar(){let fsg=0,jsgf=0;const jsgf_path=this.config.get("jsgf");if(jsgf_path!=null)jsgf=await load_to_s3file(jsgf_path);const fsg_path=this.config.get("fsg");if(fsg_path!=null)fsg=await load_to_s3file(fsg_path);if(fsg||jsgf){const rv=Module._ps_init_grammar_s3file(this.ps,fsg,jsgf);if(rv<0)throw new Error("Failed to initialize grammar")}}assert_initialized(){if(!this.initialized)throw new Error("Decoder not yet initialized")}async reinitialize_audio(){this.assert_initialized();Module._ps_reinit_fe(this.ps,0)}delete(){if(this.config)this.config.delete();if(this.ps)Module._ps_free(this.ps);this.ps=0}async start(){this.assert_initialized();if(Module._ps_start_utt(this.ps)<0){throw new Error("Failed to start utterance processing")}}async stop(){this.assert_initialized();if(Module._ps_end_utt(this.ps)<0){throw new Error("Failed to stop utterance processing")}}async process(pcm,no_search=false,full_utt=false){this.assert_initialized();const pcm_bytes=pcm.length*pcm.BYTES_PER_ELEMENT;const pcm_addr=Module._malloc(pcm_bytes);const pcm_u8=new Uint8Array(pcm.buffer);writeArrayToMemory(pcm_u8,pcm_addr);const rv=Module._ps_process_float32(this.ps,pcm_addr,pcm_bytes/4,no_search,full_utt);Module._free(pcm_addr);if(rv<0){throw new Error("Utterance processing failed")}return rv}get_hyp(){this.assert_initialized();return UTF8ToString(Module._ps_get_hyp(this.ps,0))}get_hypseg(){this.assert_initialized();let itor=Module._ps_seg_iter(this.ps);const config=Module._ps_get_config(this.ps);const frate=Module._cmd_ln_int_r(config,allocateUTF8OnStack("-frate"));const seg=[];while(itor!=0){const frames=stackAlloc(8);Module._ps_seg_frames(itor,frames,frames+4);const start_frame=getValue(frames,"i32");const end_frame=getValue(frames+4,"i32");const seg_item={word:ccall("ps_seg_word","string",["number"],[itor]),start:start_frame/frate,end:end_frame/frate};seg.push(seg_item);itor=Module._ps_seg_next(itor)}return seg}lookup_word(word){this.assert_initialized();const cword=allocateUTF8OnStack(word);const cpron=Module._ps_lookup_word(this.ps,cword);if(cpron==0)return null;return UTF8ToString(cpron)}async add_word(word,pron,update=true){this.assert_initialized();const cword=allocateUTF8OnStack(word);const cpron=allocateUTF8OnStack(pron);const wid=Module._ps_add_word(this.ps,cword,cpron,update);if(wid<0)throw new Error("Failed to add word "+word+" with pronunciation "+pron+" to the dictionary.");return wid}create_fsg(name,start_state,final_state,transitions){this.assert_initialized();const logmath=Module._ps_get_logmath(this.ps);const config=Module._ps_get_config(this.ps);const lw=Module._cmd_ln_float_r(config,allocateUTF8OnStack("-lw"));let n_state=0;for(const t of transitions){n_state=Math.max(n_state,t.from,t.to)}n_state++;const fsg=ccall("fsg_model_init","number",["string","number","number","number"],[name,logmath,lw,n_state]);Module._fsg_set_states(fsg,start_state,final_state);for(const t of transitions){let logprob=0;if("prob"in t){logprob=Module._logmath_log(logmath,t.prob)}if("word"in t){const wid=ccall("fsg_model_word_add","number",["number","string"],[fsg,t.word]);if(wid==-1){Module._fsg_model_free(fsg);return 0}Module._fsg_model_trans_add(fsg,t.from,t.to,logprob,wid)}else{Module._fsg_model_null_trans_add(fsg,t.from,t.to,logprob)}}return{fsg:fsg,delete(){Module._fsg_model_free(this.fsg);this.fsg=0}}}parse_jsgf(jsgf_string,toprule=null){this.assert_initialized();const logmath=Module._ps_get_logmath(this.ps);const config=Module._ps_get_config(this.ps);const lw=Module._cmd_ln_float_r(config,allocateUTF8OnStack("-lw"));const cjsgf=allocateUTF8OnStack(jsgf_string);const jsgf=Module._jsgf_parse_string(cjsgf,0);if(jsgf==0)throw new Error("Failed to parse JSGF");let rule;if(toprule!==null){const crule=allocateUTF8OnStack(toprule);rule=Module._jsgf_get_rule(jsgf,crule);if(rule==0)throw new Error("Failed to find top rule "+toprule)}else{rule=Module._jsgf_get_public_rule(jsgf);if(rule==0)throw new Error("No public rules found in JSGF")}const fsg=Module._jsgf_build_fsg(jsgf,rule,logmath,lw);Module._jsgf_grammar_free(jsgf);return{fsg:fsg,delete(){Module._fsg_model_free(this.fsg);this.fsg=0}}}async set_fsg(fsg){this.assert_initialized();if(Module._ps_set_fsg(this.ps,"_default",fsg.fsg)!=0){throw new Error("Failed to set FSG in decoder")}}}async function*read_featparams(featparams){let fpdata;if(ENVIRONMENT_IS_WEB){const response=await fetch(featparams);if(response.ok)fpdata=await response.text();else throw new Error("Failed to fetch "+featparams+" :"+response.statusText)}else{const fs=require("fs/promises");fpdata=await fs.readFile(featparams,{encoding:"utf8"})}const line_re=/^.*$/gm;const arg_re=/"([^"]*)"|'([^'])'|(\S+)/g;let key=null;for(const m of fpdata.matchAll(line_re)){const line=m[0].trim();for(const arg of line.matchAll(arg_re)){const token=arg[1]??arg[2]??arg[3];if(token=="#")break;if(key!==null){yield[key,token];key=null}else key=token}}if(key!==null)throw new Error("Odd number of arguments in "+featparams)}async function load_to_s3file(path){let blob_u8;if(ENVIRONMENT_IS_WEB){const response=await fetch(path);if(response.ok){const blob=await response.blob();const blob_buf=await blob.arrayBuffer();blob_u8=new Uint8Array(blob_buf)}else throw new Error("Failed to fetch "+path+" :"+response.statusText)}else{const fs=require("fs/promises");const blob=await fs.readFile(path);blob_u8=new Uint8Array(blob.buffer)}const blob_len=blob_u8.length+1;const blob_addr=Module._malloc(blob_len);if(blob_addr==0)throw new Error("Failed to allocate "+blob_len+" bytes for "+path);writeArrayToMemory(blob_u8,blob_addr);HEAP8[blob_addr+blob_len]=0;return Module._s3file_init(blob_addr,blob_len-1)}function get_model_path(subpath){if(ENVIRONMENT_IS_WEB){return Module.modelBase+subpath}else{const path=require("path");return path.join(Module.modelBase,subpath)}}Module.get_model_path=get_model_path;Module.Config=Config;Module.Decoder=Decoder;


  return Module.ready
}
);
})();
if (typeof exports === 'object' && typeof module === 'object')
  module.exports = Module;
else if (typeof define === 'function' && define['amd'])
  define([], function() { return Module; });
else if (typeof exports === 'object')
  exports["Module"] = Module;
